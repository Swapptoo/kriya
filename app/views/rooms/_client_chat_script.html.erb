<script>

  var thanks = [
    'Awesome! Thank you for letting us know what you need. I am now matching your job with one of our many freelancers who will be reaching out shortly. In the meantime, can you please help me get to know you better?',
    {
      type: 'blank',
      path: 'website'
    }
  ]

  var noProblem = [
    'Alright, no problem',
    {
      type: 'blank',
      path: 'reachingShortly'
    }
  ]

  var reachingShortly = [
    'Thank you for answering my questions. I assigned this task to the matching freelancers. They will be here shortly.',
    {
      type: 'blank',
      path: 'note'
    }
  ]

  var note = [
    'Please allow 6 to 12 hrs delay in response if you created this after 10am PST.'
  ]


  var website = [
    'Please provide your company website',
    {
      type: 'submitAnswer',
      submitUrl: '/tasks/<%= current_user.client? ? @room.id : '' %>',
      htmlClass: 'website',
      path: 'employeeCount',
      key: 'website'
    }
  ]

  var employeeCount = [
    'Great! And how many employees are you?',
    {
      type: 'submitAnswer',
      submitUrl: '/tasks/<%= current_user.client? ? @room.id : '' %>',
      htmlClass: 'employee-count',
      path: 'slack',
      key: 'total_employee'
    }
  ]

  var slack = [
    'Thanks for that. One last question. Do you use Slack? Please click yes if you do as we deeply integrate with Slack to increase your productivity and communicate easily with the Kriya workforce.',
    {
      type: 'visit',
      answers: [
        {
          'text': 'Add Slack',
          'path': "<%== escape_javascript slack_integration_url =%>"
        },
        {
          'text': 'Pass',
          'path': '/tasks/<%= current_user.client? ? @room.id : '' %>/deny_slack'
        }
      ]
    }
  ]

  var configs = {
    greeting: thanks,
    website: website,
    employeeCount: employeeCount,
    slack: slack,
    noProblem: noProblem,
    reachingShortly: reachingShortly,
    note: note
  }

  <% if @room.website? %>
    var configs = {
      greeting: employeeCount,
      employeeCount: employeeCount,
      slack: slack,
      noProblem: noProblem,
      reachingShortly: reachingShortly,
      note: note
    }
  <% end %>

  <% if @room.total_employee? %>
    var configs = {
      greeting: slack,
      slack: slack,
      noProblem: noProblem,
      reachingShortly: reachingShortly,
      note: note
    }
  <% end %>

  <% if @room.slack_channels(user: user).present? %>
    var configs = {
      greeting: slack,
      slack: slack,
      noProblem: noProblem,
      reachingShortly: reachingShortly,
      note: note
    }
  <% end %>

  new Chat(
    configs,
    {
      targetNode: '#chat'
    }
  );
</script>

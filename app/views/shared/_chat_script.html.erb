<%- new_user ||= false %>
<script>

  var category = [
    "Please specify the department you need help with?",
    {
      type: 'choose',
      answers: [{
        'text': 'Engineering',
        'key': 'category_name',
        'path': 'timeline'
        },
        {
        'text': 'Product',
        'key': 'category_name',
        'path': 'timeline'
        },
        {
        'text': 'Design',
        'key': 'category_name',
        'path': 'timeline'
        },
        {
        'text': 'Sales',
        'key': 'category_name',
        'path': 'timeline'
        },
        {
        'text': 'Marketing',
        'key': 'category_name',
        'path': 'timeline'
        },
        {
        'text': 'Pitch & Presentation',
        'key': 'category_name',
        'path': 'timeline'
        },
        {
        'text': 'PR & Editorial',
        'key': 'category_name',
        'path': 'timeline'
        }
      ]
    }
  ];
  var timeline = [
    'What\'s the length of this project?',
    {
      type: 'choose',
      answers: [{
        'text': '3 days',
        'path': 'expertiseLevel',
        'key': 'timeline'
      },
      {
        'text': '1 week',
        'path': 'expertiseLevel',
        'key': 'timeline'
      },
      {
        'text': '2 weeks',
        'path': 'expertiseLevel',
        'key': 'timeline'
      },
      {
        'text': '3 weeks',
        'path': 'expertiseLevel',
        'key': 'timeline'
      },
      {
        'text': '1 month',
        'path': 'expertiseLevel',
        'key': 'timeline'
      },
      {
        'text': '6 months',
        'path': 'expertiseLevel',
        'key': 'timeline'
      }
      ]
    }
  ];
  var expertise_level = [
    'Please choose the expertise level',
    {
      type: 'choose',
      answers: [{
          'text': 'Basic',
          'path': 'budget',
          'key': 'quality'
        },
        {
          'text': 'Intermediate',
          'path': 'budget',
          'key': 'quality'
        },
        {
          'text': 'Experienced',
          'path': 'budget',
          'key': 'quality'
        }
      ]
    }
  ];
  var budget = [
    'What is your budge estimate for this project in USD? ',
    {
      type: 'write',
      path: "<%= new_user ? 'dummy' : 'description' %>",
      key: "budget"
    }
  ];

  var description = [
    'Please give detailed description of what needs to be done by creating a post, meanwhile I\'ll get this started with our workforce',
    {
      type: 'open-modal',
      path: 'notice',
      key: "description",
      answers: [{
        'text': 'Add Description',
        'path': 'description',
        'key': 'quality'
      }]
    }
  ];

  var video = [
    'Please enter your credit card information while I pull the best resources and get this started soon. Remember that I give you a full refund for an unsatisfied service!',
    {
      type: 'write',
      path: 'notice',
      key: "credit-card"
    }
  ];
  var notice = [
    'Please note that we are charging your card with the budget amount',
    {
      type: 'submit',
      answers: [{
        'text': 'Ok',
        'path': '/goomps/new'
      }]
    }
  ];

  var sign_up = [
    'Sounds good, please sign up to help us understand more about your project',
    {
      type: 'visit',
      answers: [{
        'text': 'Twitter',
        'path': '/auth/twitter?user=client'
      },{
        'text': 'Facebook',
        'path': '/auth/facebook?user=client'
      },{
        'text': 'LinkedIn',
        'path': '/auth/linkedin?user=client'
      },{
        'text': 'Email',
        'path': '/users/sign_up'
      }]
    }
  ];
  var login = [
    'Cool, please login to get to your projects',
    {
      type: 'visit',
      answers: [{
        'text': 'Twitter',
        'path': '/auth/twitter?user=client'
      },{
        'text': 'Facebook',
        'path': '/auth/facebook?user=client'
      },{
        'text': 'LinkedIn',
        'path': '/auth/linkedin?user=client'
      },{
        'text': 'Email',
        'path': '/users/sign_in'
      }]
    }
  ];
  var dummy = [
    '',
    {
      type: 'submitDummy',
      path: 'signup',
      key: 'submit-dummy'
    }
  ];

  <%- if new_user %>
    var configs = {
      greeting: [
        'Hi, I am Kriya Bot. Welcome! I am here to help in getting work done by on demand workforce across the world.',
        {
          type: 'choose',
          answers: [
            {
              'text': 'Get Started',
              'path': 'options'
            },
            {
              'text': 'Sign In',
              'path': 'login'
            }
          ]
        }
      ],
      options: category,
      timeline: timeline,
      expertiseLevel: expertise_level,
      budget: budget,
      dummy: dummy,
      login: login,
      signup: sign_up
    };
  <%- else %>
    var configs = {
      greeting: category,
      timeline: timeline,
      expertiseLevel: expertise_level,
      budget: budget,
      description: description
    };
  <%- end %>

  new Chat(
    configs,
    {
      targetNode: '#chat'
    }
  );
</script>
